# CHANGELOG


## v3.5.20 (2024-03-12)

- Fix: 限制仅post请求才解析请求体

## v3.5.19 (2023-12-26)

- Fix: 工具包对外暴露PublicKey和PrivateKey
- Fix: 调整微信支付敏感信息加密机默认哈希算法 (#65)

## v3.5.18 (2023-12-26)

- Fix: 修复微信支付上传图片时报错的问题 (#64)

## v3.5.17 (2023-12-20)

- Fix: 修复TS问题 (#62)

## v3.5.16 (2023-12-20)

- Fix: 优化消息类型，允许未定义字段的存在 (#62)

## v3.5.15 (2023-12-20)

- Fix: 微信支付的敏感信息加密机增加获取公钥序列号的方法 (#57)

## v3.5.14 (2023-12-20)

- Fix: 修复个别情况下微信支付的敏感信息加密功能可能使用旧证书的问题 (#57)
- Fix: 获取微信支付平台证书时，忽略有效期少于1天的证书 (#57)

## v3.5.13 (2023-12-20)

- Feat: 开放平台新增快速注册企业小程序审核事件的支持 (#62)

- Fix: 修复微信支付敏感信息加密方法证书错误的问题 (#57)

## v3.5.12 (2023-12-19)

- Fix: 修复类型错误

## v3.5.11 (2023-12-19)

- Fix: 微信支付获取平台证书优化为随用随获取的方式，并增加缓存 (#57)
- Fix: 修复微信支付请求无参数时，签名计算异常的问题 (#60)

## v3.5.10 (2023-12-19)

- Feat: 微信支付通知处理增加v2接口xml格式的消息处理 (#56)

- Fix: 修复计算v3签名时请求的querystring参数丢失导致签名错误的问题 (#60)
- Fix: 修复回调方法的消息类型推到错误的问题
- Fix: 修复获取平台证书时，响应数据解析异常的问题 (#57)

## v3.5.9 (2023-12-18)

- Feat: 微信支付增加读取平台证书的方法loadPlatformCerts，并自动写入商户配置 (#57)
- Feat: 微信支付增加v2版本的消息验证方法validateV2 (#56)

## v3.5.8 (2023-12-18)

- Feat: thirdpartyCode2Session方法重命名为code2Session (#54)
- Feat: 新增将请求响应类转换为标准http响应类的方法toHttpResponse

- Fix: 修复验证器类型错误 (#58)
- Fix: 修复验证器类型错误的问题 (#56)
- Fix: 修复ts类型错误

## v3.5.7 (2023-12-18)

- Feat: 企业微信工具类增加encrypt、decrypt加解密方法 (#58)
- Feat: 微信支付增加验证器api (#56)
- Feat: 开放平台新增代理小程序登录接口thirdpartyCode2Session （#54）
- Feat: 各模块增加自定义工具类的API

- Fix: 修复http相关配置项无效的问题 (#59)
- Fix: 升级ts，并修复ts类型错误 (#50)

## v3.5.6 (2023-12-17)

- Fix: 修复获取代理公众号或小程序实例时，未设置配置项导致
- Fix: 修复响应结果类型判断异常导致结果解析错误的问题
- Fix: 修复开放平台服务端未自动处理ComponentVerifyTicket的问题

## v3.5.5 (2023-12-02)

- Fix: 修复获取服务端实例时，没有获取到最新请求实例的问题 (#47)

## v3.5.4 (2023-11-15)

- Fix: 修复生成支付参数中，时间戳类型错误 (#45)
- Fix: 修复计算支付签名时证书调用错误
- Fix: 证书文件无法访问时抛出异常

## v3.5.2 (2023-11-11)

- Fix: 更新依赖包

## v3.5.1 (2023-09-04)

- Fix: 调整公众号、小程序access_token默认缓存名称的配置方式

## v3.5.0 (2023-07-18)

- Feat: 优化ts的提示，并新增定义配置、定义服务端处理方法的工具函数

## v3.4.0 (2023-06-13)

- Feat: 公众号、小程序配置项新增是否使用稳定版接口调用凭据的选项

## v3.3.6 (2023-05-12)

- Fix: 修复微信支付v3签名错误

## v3.3.5 (2023-04-28)

- Fix: 修复部分接口请求方式及请求参数设置方式异常的问题

## v3.3.4 (2023-04-23)

- Fix: 更新依赖包node-socialite

## v3.3.3 (2023-04-11)

## v3.3.2 (2023-03-30)

- Feat: 新增生成授权页地址的方法

- Fix: 修复获取第三方授权令牌异常的问题

## v3.3.1 (2023-03-27)

- Fix: 调整3.x分支为npm的latest标签

## v3.3.0 (2023-03-22)

- Feat: 新增企业微信开放平台模块

- Fix: 完善企业微信开放平台的配置项
- Fix: 将企业微信开放平台添加到全局入口
- Fix: 调整配置项提示
- Fix: 修复各模块服务端添加的处理方法无法正确提示的问题

## v3.2.0 (2023-03-10)

- Feat: 新增企业微信模块

## v3.1.4 (2023-02-02)

## v3.1.3 (2023-02-01)

- Fix: 修复默认的文件缓存配置项不生效问题 (#35)

## v3.1.2 (2022-12-06)

- Feat: 新作微信支付模块的文件上传方法

- Fix: nodejs版本不能低于15.6.0
- Fix: 更新依赖的nodejs版本
- Fix: 修复RSA证书使用格式不正确导致的签名异常问题

## v3.1.1 (2022-11-15)

- Feat: 增加请求失败时的重试机制，具体见配置项http.retry

## v3.1.0 (2022-11-09)

- Feat: 新增开放平台模块

- Fix: 修复获取配置项异常的问题
- Fix: 修复配置项类型判断异常的问题
- Fix: 修复请求客户端无法设置请求是否错误判断逻辑的方法

- Docs: 增加开放平台的说明

- Perf: 优化url路径解析方法

## v3.0.1 (2022-08-26)

- Fix: 修复with方法无效的问题

## v3.0.0 (2022-07-28)

- Feat: 请求后自动解析响应结果，简化获取数据的方式
- Feat: 新增微信支付模块的公共调用方法
- Feat: 新增支付模块

- Fix: 响应内容解析时排除buffer对象
- Fix: 修复获取框架版本异常的问题
- Fix: 修复获取响应对象的字符串数据时异常的问题
- Fix: 修复测试用例中post等方式模拟请求时异常的问题
- Fix: 调整微信支付配置项
- Fix: 修复消息参数提示缺失问题
- Fix: 调整默认的RSA加密算法中的哈希方式为sha256
- Fix: 调整默认Message提示的作用域为公众号和小程序
- Fix: 修复AccessToken对象声明错误的问题

- Docs: 更新client调用方法说明
- Docs: 增加微信支付相关说明文档

## v3.0.0-beta.5 (2022-06-29)

- Fix: 修复服务端获取消息异常的问题

## v3.0.0-beta.4 (2022-06-24)

- Feat: 增加链式添加上传文件的方法
- Feat: 请求接口数据增加 FormData 实例的支持

- Fix: 修复接受微信回调接口验证请求时，返回对象无文件内容的问题

## v3.0.0-beta.3 (2022-06-22)

- Fix: 修复获取js ticket时无法自动获取access_token的问题
- Fix: 修复日志处理回调函数的参数提示异常的问题

## v3.0.0-beta.2 (2022-06-21)

- Feat: 统一调用入口增加一些常用的类

- Fix: 修复获取的服务端实例没有代码提示的问题

## v3.0.0-beta.1 (2022-06-21)

- Feat: 新增设置预置参数相关方法
- Feat: 增加设置日志处理器的方法
- Feat: 增加统一的对象调用入口

- Fix: 调整获取响应内容时的返回类型
- Fix: 修复微信小程序access_token键名前缀与公众号相同的问题
- Fix: 优化并导出配置项声明
- Fix: 修复请求响应结果非字符串类型时转化数据格式报错的问题
- Fix: 未设置ServerRequest实例就调用getRequest时提示异常
- Fix: 修复未自动创建客户端实例的问题

- Perf: 调整接口请求返回的HttpResponse对象toObject时的数据类型

## v3.0.0-alpha.2 (2022-06-08)

- Feat: 新增小程序相关接口

- Fix: 修复content-type非json时，错误判断不正确问题

- Perf: 优化消息对象的提示信息

- Refactor: 简化构造函数的写法

## v3.0.0-alpha.1 (2022-04-16)

- Feat: 新增框架架构和公众号模块

- Docs: 更新3.x说明文档
